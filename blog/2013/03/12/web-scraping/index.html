
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>web_scraping - My Octopress Blog</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Web Scraping or How to pull data from a website without API &#8220;If it can bleed, I can kill it.&#8221;
Just kidding, if the website provide a way &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://longwei.github.com/blog/2013/03/12/web-scraping">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:longwei.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Web_scraping</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-12T10:45:00-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Web Scraping or How to pull data from a website without API</p>

<p>&#8220;If it can bleed, I can kill it.&#8221;
Just kidding, if the website provide a way for download HTML content and render it in your brower, then the content could be accessed via script. Don&#8217;t wasting your time repeatly doing thing for hours that can be done in script in few minutes.</p>

<p>Note: decent website normally provide APIs for fetch data, which make thing really really easy.
all you need to do, is to read the document and find the section that you interested in.
then to register a key and then send along the key with every request.</p>

<p>let&#8217;s make some fun.</p>

<ol>
<li>define the data, and figure out basic access patterns
This is the most important and comfusing part. each website has their own unstructed data.
Here are few question to define the data
a. what is the endpoint, which in human language, where is the url that return the data.
b. what is the GET parameters?
What if the data is fetched by POST method? huh?? Yes, it did happens.
b1. find the form, get the action attribute and sending data variable name;
b2. setup a localhost, print receive post request, then redirect the form action attribute to your localhost
b3. then verified your post request.
cUrl is your friend to spoof a http request.
http://curl.haxx.se/docs/httpscripting.html
if tl:tr, here is the shortcut &#8211;location for redirection &#8211;data for post request data</li>
</ol>


<p>What if the the data is fetched by ajax? capture your xhr request, then spoof it.</p>

<p>What if the html page is unstructed?
1. find the CSS hooks. which is the class attribute of <div> you interested in. this is normal way designer organize the webpage themself.
2. get a good html parsing library, dont use xml or dont even try to use REGEX.</p>

<p>Have fun, write a script to fire off a request to the url and pars the returned data.
follow up, https://gist.github.com/gjreda/f3e6875f869779ec03db</p>

<p>Tips on debug:
1. Header sometime matters, try to copy the header exactly as you did in brower
2. Login? find a httop library that handles logins and send.</p>

<p>https://gist.github.com/longwei/5096906</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      








  


<time datetime="2013-03-12T10:45:00-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://longwei.github.com/blog/2013/03/12/web-scraping/" data-via="" data-counturl="http://longwei.github.com/blog/2013/03/12/web-scraping/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/12/web-scraping/">web_scraping</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
